{"ast":null,"code":"import _initializerDefineProperty from \"/Users/devcodeits/workspace/kaimobile/fishing_react/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/devcodeits/workspace/kaimobile/fishing_react/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/devcodeits/workspace/kaimobile/fishing_react/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _temp;\n\nimport { action, observable } from \"mobx\";\nexport default new (_class = (_temp = class PageStore {\n  constructor() {\n    _initializerDefineProperty(this, \"scripts\", _descriptor, this);\n  }\n\n  /** 외부 Script 모듈을 Inject 한다. */\n  injectScript(src, onLoad, onError) {\n    return new Promise(resolve => {\n      const script = document.createElement(\"script\");\n      script.src = src;\n      script.addEventListener(\"load\", () => {\n        if (onLoad) onLoad();\n        resolve(true);\n      });\n      script.addEventListener(\"error\", () => {\n        if (onError) onError();\n        resolve(false);\n      });\n      document.body.appendChild(script);\n      this.scripts.push(script);\n    });\n  }\n  /** Inject 된 외부 Script 모듈을 Remove 한다. */\n\n\n  removeInjectetdScripts() {\n    for (let script of this.scripts) {\n      script.remove();\n    }\n  }\n  /** Window Scroll 정보를 State 에 저장한다. */\n\n\n  storeScroll(pageX, pageY) {\n    const {\n      pageXOffset,\n      pageYOffset,\n      location\n    } = window;\n    const {\n      state: prevState = {}\n    } = window.history;\n    window.history.replaceState({ ...prevState,\n      scroll: {\n        x: pageX || pageXOffset,\n        y: pageY || pageYOffset\n      }\n    }, \"\", location.pathname);\n  }\n  /** State 에 저장된 Window Scroll 을 복구한다. */\n\n\n  restoreScroll() {\n    const {\n      state: prevState = {}\n    } = window.history;\n    const {\n      scroll: prevScroll = {\n        x: 0,\n        y: 0\n      }\n    } = prevState;\n    window.scrollTo(prevScroll.x, prevScroll.y);\n  }\n\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"scripts\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"injectScript\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"injectScript\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"removeInjectetdScripts\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"removeInjectetdScripts\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"storeScroll\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"storeScroll\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"restoreScroll\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"restoreScroll\"), _class.prototype)), _class)();","map":{"version":3,"sources":["/Users/devcodeits/workspace/kaimobile/fishing_react/src/stores/common/PageStore.js"],"names":["action","observable","PageStore","injectScript","src","onLoad","onError","Promise","resolve","script","document","createElement","addEventListener","body","appendChild","scripts","push","removeInjectetdScripts","remove","storeScroll","pageX","pageY","pageXOffset","pageYOffset","location","window","state","prevState","history","replaceState","scroll","x","y","pathname","restoreScroll","prevScroll","scrollTo"],"mappings":";;;;;;AAAA,SAASA,MAAT,EAAiBC,UAAjB,QAAmC,MAAnC;AAEA,eAAe,uBAAK,MAAMC,SAAN,CAAgB;AAAA;AAAA;AAAA;;AAGlC;AACQC,EAAAA,YAAR,CAAqBC,GAArB,EAA0BC,MAA1B,EAAkCC,OAAlC,EAA2C;AACzC,WAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9B,YAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,MAAAA,MAAM,CAACL,GAAP,GAAaA,GAAb;AACAK,MAAAA,MAAM,CAACG,gBAAP,CAAwB,MAAxB,EAAgC,MAAM;AACpC,YAAIP,MAAJ,EAAYA,MAAM;AAClBG,QAAAA,OAAO,CAAC,IAAD,CAAP;AACD,OAHD;AAIAC,MAAAA,MAAM,CAACG,gBAAP,CAAwB,OAAxB,EAAiC,MAAM;AACrC,YAAIN,OAAJ,EAAaA,OAAO;AACpBE,QAAAA,OAAO,CAAC,KAAD,CAAP;AACD,OAHD;AAIAE,MAAAA,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,MAA1B;AACA,WAAKM,OAAL,CAAaC,IAAb,CAAkBP,MAAlB;AACD,KAbM,CAAP;AAcD;AACD;;;AACQQ,EAAAA,sBAAR,GAAiC;AAC/B,SAAK,IAAIR,MAAT,IAAmB,KAAKM,OAAxB,EAAiC;AAC/BN,MAAAA,MAAM,CAACS,MAAP;AACD;AACF;AACD;;;AACQC,EAAAA,WAAR,CAAoBC,KAApB,EAA2BC,KAA3B,EAAkC;AAChC,UAAM;AAAEC,MAAAA,WAAF;AAAeC,MAAAA,WAAf;AAA4BC,MAAAA;AAA5B,QAAyCC,MAA/C;AACA,UAAM;AAAEC,MAAAA,KAAK,EAAEC,SAAS,GAAG;AAArB,QAA4BF,MAAM,CAACG,OAAzC;AACAH,IAAAA,MAAM,CAACG,OAAP,CAAeC,YAAf,CACE,EACE,GAAGF,SADL;AAEEG,MAAAA,MAAM,EAAE;AACNC,QAAAA,CAAC,EAAEX,KAAK,IAAIE,WADN;AAENU,QAAAA,CAAC,EAAEX,KAAK,IAAIE;AAFN;AAFV,KADF,EAQE,EARF,EASEC,QAAQ,CAACS,QATX;AAWD;AACD;;;AACQC,EAAAA,aAAR,GAAwB;AACtB,UAAM;AAAER,MAAAA,KAAK,EAAEC,SAAS,GAAG;AAArB,QAA4BF,MAAM,CAACG,OAAzC;AACA,UAAM;AAAEE,MAAAA,MAAM,EAAEK,UAAU,GAAG;AAAEJ,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE;AAAX;AAAvB,QAA0CL,SAAhD;AACAF,IAAAA,MAAM,CAACW,QAAP,CAAgBD,UAAU,CAACJ,CAA3B,EAA8BI,UAAU,CAACH,CAAzC;AACD;;AA/CiC,CAArB,iFAEZ/B,UAFY;AAAA;AAAA;AAAA;AAAA;AAAA,WAES,EAFT;AAAA;AAAA,iEAIZD,MAJY,gKAqBZA,MArBY,+JA2BZA,MA3BY,sJA2CZA,MA3CY,oGAAf","sourcesContent":["import { action, observable } from \"mobx\";\n\nexport default new (class PageStore {\n  /** Inject 된 외부 Script 모듈 배열 */\n  @observable scripts = [];\n  /** 외부 Script 모듈을 Inject 한다. */\n  @action injectScript(src, onLoad, onError) {\n    return new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = src;\n      script.addEventListener(\"load\", () => {\n        if (onLoad) onLoad();\n        resolve(true);\n      });\n      script.addEventListener(\"error\", () => {\n        if (onError) onError();\n        resolve(false);\n      });\n      document.body.appendChild(script);\n      this.scripts.push(script);\n    });\n  }\n  /** Inject 된 외부 Script 모듈을 Remove 한다. */\n  @action removeInjectetdScripts() {\n    for (let script of this.scripts) {\n      script.remove();\n    }\n  }\n  /** Window Scroll 정보를 State 에 저장한다. */\n  @action storeScroll(pageX, pageY) {\n    const { pageXOffset, pageYOffset, location } = window;\n    const { state: prevState = {} } = window.history;\n    window.history.replaceState(\n      {\n        ...prevState,\n        scroll: {\n          x: pageX || pageXOffset,\n          y: pageY || pageYOffset,\n        },\n      },\n      \"\",\n      location.pathname\n    );\n  }\n  /** State 에 저장된 Window Scroll 을 복구한다. */\n  @action restoreScroll() {\n    const { state: prevState = {} } = window.history;\n    const { scroll: prevScroll = { x: 0, y: 0 } } = prevState;\n    window.scrollTo(prevScroll.x, prevScroll.y);\n  }\n})();\n"]},"metadata":{},"sourceType":"module"}